# HTTPS Setup for Local Development

This directory contains the necessary scripts and templates to set up HTTPS for local Dockerized applications using Caddy and mkcert on a WSL environment.

## Overview

This setup solves the WSL IP volatility issue by using domain mapping to localhost (127.0.0.1) instead of relying on changing WSL IP addresses. All services will be accessible via friendly domain names like `https://n8n.local`, `https://grafana.local`, etc.

## Prerequisites

- WSL2 environment
- Docker and Docker Compose running in WSL
- Windows host file editing permissions

## Setup Steps

1. **Install mkcert in WSL**:
   ```bash
   ./setup-https.sh
   ```

2. **Generate Certificates**:
   - The setup script will automatically generate certificates for all configured services
   - Certificates are stored in the persistent `certs/` directory

3. **Update Windows Hosts File**:
   - Add the following entries to `C:\Windows\System32\drivers\etc\hosts`:
   ```
   127.0.0.1    n8n.local
   127.0.0.1    grafana.local
   127.0.0.1    supabase.local
   127.0.0.1    langfuse.local
   127.0.0.1    flowise.local
   127.0.0.1    webui.local
   127.0.0.1    searxng.local
   127.0.0.1    weaviate.local
   127.0.0.1    neo4j.local
   127.0.0.1    prometheus.local
   127.0.0.1    letta.local
   127.0.0.1    qdrant.local
   ```

4. **Restart Services**:
   ```bash
   docker-compose down
   docker-compose up -d
   ```

## Files

- `setup-https.sh`: Main setup script that installs mkcert and generates certificates
- `generate-certs.sh`: Certificate generation script
- `templates/Caddyfile.https`: HTTPS Caddyfile template
- `certs/`: Directory where generated certificates are stored (persistent)

## Security Benefits

- Trusted HTTPS certificates (no browser warnings)
- Secure local development environment
- Protection against man-in-the-middle attacks on local connections
- WSL IP address independence

## Troubleshooting

- If certificates aren't trusted, ensure mkcert root CA is installed
- If domains don't resolve, check Windows hosts file entries
- For WSL IP changes, no action needed - domains map to localhost

## Certificate Renewal

Certificates generated by mkcert are valid for 10 years and don't need frequent renewal for local development.
